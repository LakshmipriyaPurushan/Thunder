{
    "$schema": "interface.schema.json",
    "jsonrpc": "2.0",
    "info": {
      "title": "Bluetooth API",
      "class": "Bluetooth",
      "description": "Bluetooth JSON-RPC interface"
    },
    "common": {
      "$ref": "common.json"
    },
    "web": {
      "$ref": "web.json"
    },
    "properties": {
      "scanning": {
        "summary": "Tells if host is currently scanning for bluetooth devices",
        "readonly": true,
        "params": {
          "type": "boolean"
        }
      },
      "device": {
        "summary": "Information about device found in scanning. If no index is supplied, all found devices are returned",
        "readonly": true,
        "params": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "address": {
                "type": "string",
                "description": "Bluetooth device address",
                "example": "11::22::33:44:55:66"
              },
              "name": {
                "type": "string",
                "description": "Bluetooth device name",
                "example": "iPhone8"
              },
              "lowenergy": {
                "type": "boolean",
                "description": "Defines if device is put in low energy mode"
              },
              "connected": {
                "type": "boolean",
                "description": "Tells if the device is connected or not"
              },
              "paired": {
                "type": "boolean",
                "description": "Tells if the device is paired with host"
              },
              "reason": {
                "type": "integer",
                "description": "TODO: WTFFFF??"
              }
            }
          }
        },
        "index": {
          "name": "Device",
          "example": "iPhone8"
        },
        "errors": [
          {
            "description": "Device not found",
            "$ref": "#/common/errors/unkownkey"
          }
        ]
      }
    },
    "methods": {
      "pair": {
        "summary": "Pair host with bluetooth device",
        "description": "Use this function to request pairing with another bluetooth device. If device accepts pairing request, connection can be established",
        "params": {
          "type": "object",
          "properties": {
            "device": {
              "type": "string",
              "description": "Device name",
              "example": "iPhone8"
            }
          }
        },
        "errors": [
          {
            "description": "Device not found",
            "$ref": "#/common/errors/unkownkey"
          }
        ]
      },
      "connect": {
        "summary": "Connect with bluetooth device",
        "description": "Use this function to connecto to bluetooth device. Devices must be paired beforehand",
        "params": {
          "type": "object",
          "properties": {
            "device": {
              "type": "string",
              "description": "Device name",
              "example": "iPhone8"
            }
          }
        },
        "errors": [
          {
            "description": "Device not found",
            "$ref": "#/common/errors/unkownkey"
          },
          {
            "description": "Device not paired",
            "$ref": "#/common/errors/general"
          },
          {
            ""
          }
        ]      
      },
      "scan": {
        "summary": "Scan environment for bluetooth devices",
        "description": "Use this function to search for bluetooth devices that are advertising themselfs.",
        "params": {
          "type": "object",
          "properties": {
            "lowenergy": {
              "type": "boolean",
              "description": "Perform a scan in low-energy mode"
            },
            "limited": {
              "type": "boolean",
              "description": "TODO: ???????????"
            },
            "passive": {
              "type": "boolean",
              "description": "Perform a passive scan, where advertiser will not be informed about pockets recived"
            },
            "duration": {
              "type": "number",
              "description": "Scanning duration in seconds"
            }
          }
        }      
      },
      "stopscan": {
        "summary": "Connect with bluetooth device",
        "description": "Cancels ongoing scanning"
      },
      "unpair": {
        "summary": "Unpair host from a bluetooth device",
        "description": "Use this function to invalidate pairing between host and selected device.",
        "params": {
          "type": "object",
          "properties": {
            "device": {
              "type": "string",
              "description": "Device name",
              "example": "iPhone8"
            }
          }
        },
        "errors": [
          {
            "description": "Device not found",
            "$ref": "#/common/errors/unkownkey"
          }
        ]
      },
      "disconnect": {
        "summary": "Disconnects host from bluetooth device",
        "description": "TODO: WRITE",
        "params": {
          "type": "object",
          "properties": {
            "device": {
              "type": "string",
              "description": "Device name",
              "example": "iPhone8"
            }
          }
        },
        "errors": [
          {
            "description": "Device not found",
            "$ref": "#/common/errors/unkownkey"
          }
        ]      
      }
    }
  }
  